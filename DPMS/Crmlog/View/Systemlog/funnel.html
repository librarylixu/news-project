<extend name="angular-base.html" />
<block name="momentjs">
</block>
<block name="headcss">

</block>
<block name="headjs">
    <!--select start-->
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}select2/3.4.5/select.css">
    <script src="{$Think.const.BOOTSTRAP_URL}select2/3.4.5/select.js"></script>
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}select2/3.4.5/select2.css">
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}select2/3.4.5/selectize.default.css">
    <!--select end-->
    <link rel="stylesheet" href="{$Think.const.PAGE_URL}css/crmSchedule/Workerorder/workerorder.css" /><!-- 这里公用了工单css -->
    <link rel="stylesheet" href="{$Think.const.CSS_URL}upload.css" />
    <script src="{$Think.const.BOOTSTRAP_URL}angular-file-upload/angular-file-upload.min.js"></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-rangy.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-sanitize.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular.min.js'></script>

    <!-- 销售漏斗echarts文件引入 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/echarts.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/echarts-gl.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/ecStat.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/dataTool.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/map/js/china.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/map/js/world.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/bmap.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}echarts/4.1.0/simplex.js"></script>
</block>
<block name="pageContent">
    <div class="page-header clearfix">
        <h4 class="blue" style="font-weight: bold; ">销售漏斗<br /><small>图表能够查看到所有项目的成单率及销售预测金额等</small></h4>
    </div>
    <div class="top-5 " style="width: 100%; height: 80%; position: relative;">
        <!--<div style="float: left;width: 25%;margin-bottom:30px;">
            <div>
                <h4 class="blue" style="font-weight: bold; ">
                    时间段筛选方式：
                    <small>
                        <select style="width:30%;">
                            <option value="0" selected="selected">全部</option>
                            <option value="1">本月</option>
                            <option value="2">本季</option>
                            <option value="3">本年</option>
                        </select>
                    </small>
                </h4>
                <div class="col-xs-12">
                    <span class="text-primary" style="float: left; line-height: 36px; margin: 20px 8px 0px 8px;">开始时间</span>
                    <div style="float: left; width: 200px; margin-top: 20px;">
                        <p class="input-group">
                            <input style="border-radius:0;" ng-click="open1()" type="text" class="form-control" current-text="今天" clear-text="清空" close-text="关闭" uib-datepicker-popup ng-model="service.start" ng-readonly="true" is-open="popup1.opened" datepicker-options="dateOptions1" ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-sm btn-warning" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </div>
                    <span class="text-primary" style="float:left;line-height:36px;margin:0 8px;">结束时间</span>
                    <div style="float:left;width:200px;">
                        <p class="input-group">
                            <input style="border-radius:0;" ng-click="open2()" type="text" class="form-control" current-text="今天" clear-text="清空" close-text="关闭" uib-datepicker-popup ng-model="service.end" ng-readonly="true" is-open="popup2.opened" datepicker-options="dateOptions2" ng-required="true" close-text="Close" />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-sm btn-warning" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </div>
                    <div style="width:100%; text-align:center;">
                        <button class="btn btn-sm btn-info" style="margin-left: 8px; margin-top: 5px;" ng-click="selectwhere()">查询</button>
                        <button class="btn btn-sm btn-warning" style="margin-left: 8px; margin-top: 5px;" ng-click="initDatepiker()">还原</button>
                    </div>
                </div>
            </div>
        </div>-->
        <div style="float: left; position: absolute; left: 0; bottom: 0; width: 25%;margin-bottom:30px;">
            <div>
                <h4 class="blue" style="font-weight: bold; ">
                    销售预测<br />
                    <small>赢单：<span ng-bind="wintotal" class="blue"></span></small>
                </h4>
            </div>
            <div ng-repeat="item in service.textallprojectmoney">
                <span style="background:{{item.color}};display:block;margin:3px 2px;padding:3px 2px;color:#fff;cursor:pointer;" class="text-center" ng-bind="item.textdata" title="查看详细漏斗信息"></span>
            </div>
        </div>
        <div id="container" style="width: 75%; height: 100%; float: right;  "></div>
    </div>
</block>
<block name="footjs">
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmlog/Systemlog/funnel.js?v={$Think.const.CRM_VERSION}"></script>
    <script>
        var userid = "{$userid}";
        var _appid = "{$appid}";
    </script>
    <script type="text/javascript" src="{$Think.const.JS_URL}directive.pagebtn.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmlog/Systemlog/uploadBtn.js"></script>
</block>