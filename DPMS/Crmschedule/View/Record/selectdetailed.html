<extend name="angular-base.html" />
<block name="momentjs">
    <link rel="stylesheet" href="{$Think.const.CSS_URL}my-comments.css" />
</block>
<block name="headcss">

    <style>
        .table tr td {
            border: 1px solid #ccc;
            background-color: #fff;
            padding-left: 12px;
            padding-right: 12px;
            padding-top: 6px;
            padding-bottom: 6px;
            box-sizing: border-box;
            word-break: break-all;
            line-height: 20px;
            color: #666;
        }

        .box p {
            display: inline;
        }
        
        @media print {
            .noprint {
                display: none;
            }
        }
        @page {
            size: auto; /* auto is the initial value */
            margin-bottom: 0mm; /* this affects the margin in the printer settings */
        }
        i{
            font-style:normal;
        }
        i b{
            font-style:italic;
        }
         .form-control.ta-scroll-window{
             min-height:80px;
             height:auto;
             clear:both;
         }
    </style>
</block>
<block name="headjs">
    <script src="{$Think.const.BOOTSTRAP_URL}angular-sanitize/{$Think.const.ANGULAR_VERSION}angular-sanitize.min.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-file-upload/angular-file-upload.min.js"></script>
    <!--<script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-rangy.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-sanitize.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular.min.js'></script>-->
    <script>
        var _id = '{$id}';
        //存一份userid
        var _userid = "{$userid}";
    </script>
</block>
<block name="pageContent">
    <!--页头-->
        <div class="container" style="font-family: 微软雅黑;width:1000px;">
            <div class="row">
                <div class="page-header clearfix col-xs-12" style="padding:30px 30px; border-bottom-style: solid; ">
                    <h1 class="col-xs-3 text-left" style="width:100%;">
                        {$MenuName}
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>
                            {$PageName}
                        </small>
                    </h1>
                    <div class="col-xs-4 text-right noprint f-r">
                        <a ng-click="print()" class="btn btn-warning btn-sm">
                            <!-- 此处可暂时保留原方法（防止带有编辑/添加/删除等按钮） -->
                            <i class="ace-icon fa fa-print"></i>&nbsp;打印
                        </a>
                        <a ng-click="refresh()" class="btn btn-success btn-sm">
                            <!-- 此处可暂时保留原方法（防止带有编辑/添加/删除等按钮） -->
                            <i class="glyphicon glyphicon-refresh"></i>&nbsp;刷新
                        </a>
                    </div>
                </div>
            </div>
            <div class="row">
                <h3 class="col-xs-3 text-left" style="width:60%; margin-bottom:20px;">
                    记录名称:
                    <small>
                        <span ng-bind="recordData.title"></span>
                    </small>
                </h3>
            </div>
            <div class="row">
                <table class="table" style="width:1000px;">
                    <tr class="info">
                        <td colspan="4">基本信息</td>
                    </tr>
                    <tr>
                        <td class="text-right" style="width:150px">记录创建人</td>
                        <td style="width:370px">
                            <span ng-bind="service.privateDateObj.usersData[recordData.userid].description"></span>
                        </td>
                        <td class="text-right" style="width:150px">创建时间</td>
                        <td style="width:370px">
                            <i class="ace-icon orange fa fa-clock-o bigger-110 noprint"></i>&nbsp;
                            <span ng-bind="formatDate(recordData.createtime)"></span>
                        </td>

                    </tr>
                    <tr>
                        <td class="text-right">关联客户</td>
                        <td>
                            <span ng-repeat="item in recordData.refcustomerid.split(',') track by $index">
                                <span ng-if="service.privateDateObj.customerinfoData[item]" ng-bind="service.privateDateObj.customerinfoData[item].name"></span><i ng-if="recordData.refcustomerid.length>1&&$index!==recordData.refcustomerid.split(',').length-1">；</i>
                            </span>
                        </td>
                        <td class="text-right">关联项目</td>
                        <td>
                            <span ng-repeat="item in recordData.refprojectid.split(',')  track by $index">
                                <span ng-if="service.privateDateObj.projectData[item]" ng-bind="service.privateDateObj.projectData[item].name"></span><i ng-if="recordData.refprojectid.length>1&&$index!==recordData.refprojectid.split(',').length-1">；</i>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">联系人</td>
                        <td>
                            <span ng-repeat="item in contactData track by $index">
                                <span ng-if="item" ng-bind="item.name"></span>(职位：<span ng-bind="item.position"></span>;&nbsp;联系方式：<span ng-bind="item.mobilephone"></span>)
                            </span>
                        </td>
                        <td class="text-right" style="width:150px">抄送</td>
                        <td style="width:370px">
                            <span class="label c-info" style="margin-right:3px;display:inline-block" ng-repeat="item in recordData.refusers.split(',')  track by $index" ng-bind="service.privateDateObj.usersData[item].username+':'+service.privateDateObj.usersData[item].description" ng-if="recordData.refusers && recordData.refusers.length > 0"></span>
                            <span class="label c-info" style="margin-right:3px;display:inline-block" ng-if="recordData.refusers == null">暂无抄送人</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-right">执行时间</td>
                        <td colspan="3">
                            <i class="ace-icon orange fa fa-clock-o bigger-110 noprint"></i>&nbsp;
                            <span ng-bind="formatDate(recordData.starttime)"></span>
                        </td>
                    </tr>
                    <tr class="info">
                        <td colspan="4"><b>问题描述</b></td>
                    </tr>
                    <tr style="height:100px;">
                        <td colspan="4">
                            <div class="col-xs-12 left-10 top-10" ng-bind-html="service.privateDateObj.workorderDataMessage[0].causedescription"></div>
                        </td>
                    </tr>
                    <!--<tr class="info">
                        <td colspan="4"><b>历史记录</b></td>
                    </tr>
                    <tr style="height:100px;">
                        <td colspan="4">
                            <div>
                                <div style="display:inline-block;">
                                    <i class="ace-icon orange fa fa-clock-o bigger-110"></i>
                                    <span ng-bind="formatDate(recordData.createtime)"></span>
                                </div>
                                <div style="display:inline-block;" class="box">
                                    &nbsp;由[<b ng-bind="service.privateDateObj.usersData &nbsp;[recordData.userid].description"></b>]创建了记录
                                </div>
                            </div>
                            <div ng-repeat="item in service.privateDateObj.workorderDataMessage | orderBy:'time' track by $index">
                                <div style="display:inline-block;" ng-if="item.resulttime != undefined">
                                    <i class="ace-icon orange fa fa-clock-o bigger-110"></i>
                                    <span ng-bind="formatDate(item.resulttime)"></span>
                                </div>
                                <div style="display:inline-block;" class="box">
                                    <span ng-bind-html="item.resultdescription"></span>
                                </div>
                            </div>
                        </td>
                    </tr>-->
                     <!-- <tr style="height:100px;" class="top-10">
                        <td colspan="4">
                           加载编辑器的容器 
                            <script class="col-xs-12" style="padding: 0px;" id="tailedcontainer" name="content" type="text/plain">
                            </script>
                            <br />
                            <div class="text-right">
                                <button class="btn btn-primary btn-sm" ng-verify="control:'Form'" type="button" ng-click="saverecordlog()" title="提交历史记录">
                                    发布
                                </button>
                            </div>
                        </td>
                    </tr>-->
                </table>
                <div page-comment />
            </div>
        </div>
</block>

<block name="scriptTemplate">

</block>

<block name="footjs">
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmschedule/Record/detailmodal.js?v={$Think.const.CRM_VERSION}"></script>
    <!-- 配置文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.all.js"></script>
    <script type="text/javascript" src="{$Think.const.JS_URL}directive.pagecomment.js"></script>
</block>
