<extend name="angular-base.html" />
<block name="momentjs">

</block>
<block name="headcss">

    <style>
        .table tr td {
            border: 1px solid #ccc;
            background-color: #fff;
            padding-left: 12px;
            padding-right: 12px;
            padding-top: 6px;
            padding-bottom: 6px;
            box-sizing: border-box;
            word-break: break-all;
            line-height: 20px;
            color: #666;
        }

        .box p {
            display: inline;
        }
        
        @media print {
            .noprint {
                display: none;
            }
        }
        @page {
            size: auto; /* auto is the initial value */
            margin-bottom: 0mm; /* this affects the margin in the printer settings */
        }
        i{
            font-style:normal;
        }
        i b{
            font-style:italic;
        }
         .form-control.ta-scroll-window{
             min-height:80px;
             height:auto;
             clear:both;
         }
    </style>
</block>
<block name="headjs">
    <script src="{$Think.const.BOOTSTRAP_URL}angular-sanitize/{$Think.const.ANGULAR_VERSION}angular-sanitize.min.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-file-upload/angular-file-upload.min.js"></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-rangy.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular-sanitize.min.js'></script>
    <script src='{$Think.const.BOOTSTRAP_URL}textAngular/textAngular.min.js'></script>
    <script>
        var _id = '{$id}';
        //存一份userid
        var _userid = "{$userid}";
    </script>
</block>
<block name="pageContent">
    <!--页头-->
    <div class="container" style="font-family: 微软雅黑;width:1000px;">
        <div class="row">
            <div class="page-header clearfix col-xs-12" style="padding:30px 30px; border-bottom-style: solid; ">
                <h1 class="col-xs-3 text-left" style="width:100%;">
                    {$MenuName}
                    <small>
                        <i class="ace-icon fa fa-angle-double-right"></i>
                        {$PageName}
                    </small>
                </h1>
                <div class="col-xs-4 text-right noprint f-r">
                    <a ng-click="print()" class="btn btn-warning btn-sm">
                        <!-- 此处可暂时保留原方法（防止带有编辑/添加/删除等按钮） -->
                        <i class="ace-icon fa fa-print"></i>&nbsp;打印
                    </a>
                    <a ng-click="refresh()" class="btn btn-success btn-sm">
                        <!-- 此处可暂时保留原方法（防止带有编辑/添加/删除等按钮） -->
                        <i class="glyphicon glyphicon-refresh"></i>&nbsp;刷新
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            <table class="table" style="width:1000px;">
                <tr class="info">
                    <td colspan="4">基本信息</td>
                </tr>
                <tr>
                    <td class="text-right" style="width:150px">返修状态</td>
                    <td style="width:370px">
                        <span class="label" ng-class="service.privateDateObj.reworkstatusData[reworkData.status].type" ng-bind="service.privateDateObj.reworkstatusData[reworkData.status].name"></span>
                    </td>
                    <td class="text-right">保修截止</td>
                    <td>
                        <i class="ace-icon orange fa fa-clock-o bigger-110 noprint"></i>&nbsp;
                        <span ng-bind="formatDate(service.privateDateObj.shipmentsData[reworkData.refship].guaranteetime,'yyyy-mm-dd')"></span>
                    </td>
                </tr>
                <tr>
                    <td class="text-right" style="width:150px">创建人</td>
                    <td style="width:370px">
                        <span ng-bind="service.privateDateObj.usersData[reworkData.userid].description"></span>
                    </td>
                    <td class="text-right" style="width:150px">指派人</td>
                    <td style="width:370px">
                        <span ng-bind="service.privateDateObj.usersData[reworkData.assignid].description"></span>
                    </td>
                </tr>
                <tr>
                    <td class="text-right">开始时间</td>
                    <td>
                        <i class="ace-icon orange fa fa-clock-o bigger-110 noprint"></i>&nbsp;
                        <span ng-bind="formatDate(reworkData.starttime,'yyyy-mm-dd')"></span>
                    </td>
                    <td class="text-right" style="width:150px">预计结束时间</td>
                    <td>
                        <i class="ace-icon orange fa fa-clock-o bigger-110 noprint"></i>&nbsp;
                        <span ng-bind="formatDate(reworkData.estimatedendtime,'yyyy-mm-dd')"></span>
                    </td>
                </tr>
                <tr>
                    <td class="text-right">关联出货清单</td>
                    <td>
                        <span ng-bind="service.privateDateObj.shipmentsData[reworkData.refship].name"></span>
                    </td>
                    <td class="text-right">抄送人</td>
                    <td style="width:370px">
                        <span class="label c-info" style="margin-right:3px;display:inline-block" ng-repeat="item in shipmentsData.refusers.split(',')  track by $index" ng-bind="service.privateDateObj.usersData[item].username+':'+service.privateDateObj.usersData[item].description" ng-if="shipmentsData.refusers && shipmentsData.refusers.length > 0"></span>
                        <span class="label c-info" style="margin-right:3px;display:inline-block" ng-if="shipmentsData.refusers == null">暂无抄送人</span>
                    </td>
                </tr>
                <tr class="info">
                    <td colspan="4"><b>故障现象</b></td>
                </tr>
                <tr style="height:100px;">
                    <td colspan="4">
                        <div class="left-10 top-10 detail_image" ng-bind-html="reworkData.phenomenon"></div>
                    </td>
                </tr>
            </table>
            <table class="table" style="width:1000px;">
                <tr class="info">
                    <td colspan="5"><b>设备序列号</b></td>
                </tr>
                <tr>
                    <td><b>设备名称</b></td>
                    <td><b>设备型号</b></td>
                    <td><b>设备序列号</b></td>
                    <td><b>返修状态</b></td>
                    <td><b>新序列号</b></td>
                </tr>
                <tr style="height:100px;" ng-repeat="item in service.reworkdeviceData">
                    <td ng-bind="service.privateDateObj.productData[service.privateDateObj.productmodelData[item.productmodelid].productid].name"></td>
                    <td ng-bind="service.privateDateObj.productmodelData[item.productmodelid].name"></td>
                    <td ng-bind-html="item.serials"></td>
                    <td>
                        <span class="label label-info" ng-class="service.privateDateObj.reworkdevicestatusData[item.status].type" ng-bind="service.privateDateObj.reworkdevicestatusData[item.status].name"></span>
                    </td>
                    <td ng-bind="item.newserial"></td>
                </tr>
                <tr class="info">
                    <td colspan="5"><b>结果描述</b></td>
                </tr>
                <tr style="height:100px;">
                    <td colspan="5">
                        <div class="left-10 top-10 detail_image" ng-bind-html="reworkData.description"></div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</block>

<block name="scriptTemplate">

</block>

<block name="footjs">
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmschedule/Rework/detailmodal.js"></script>
    <!-- 配置文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.all.js"></script>
</block>
