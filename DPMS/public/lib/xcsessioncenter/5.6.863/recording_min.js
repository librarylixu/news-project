RecordingManager=function(){function h(){f=0;0<g.length&&(g.length=0);0<c.length&&(c.length=0)}function p(a){if(0<f&&0<c.length)return r.exit(),(a||window.event).returnValue="Please download the recorded file first"}function l(a){for(var d=new Uint8Array(64),k=a.filetag||"RDPV",c=0,e=0;4>e;e++)d[c++]=k.charCodeAt(e);b(d,0,2,4);b(d,a.width,2,6);b(d,a.height,2,8);b(d,a.color,1,10);b(d,f,8,11);b(d,a.duration,8,19);b(d,1,4,27);g.push(d)}function b(a,d,b,c){for(--b;0<=b;b--)a[c++]=d>>8*b&255}function m(a){var d=
a.getType(),c=new Uint8Array(-1==d?8:10);b(c,a.getLen()+(-1==d?0:2),4,0);b(c,a.getTime()-f,4,4);-1!=d&&(b(c,a.getType()&255,1,8),b(c,a.getType()>>8,1,9));g.push(c);g.push(a.getData())}var c=[],n="",f=0,e,q="",g=[],r=this;this.setHeader=function(a){h();f=(new Date).getTime();e=a;n=".rdpv";null!=e.namesuffix&&void 0!=e.namesuffix&&(n=e.namesuffix);q=e.name+f+n;window.addEventListener("beforeunload",p,!1)};this.add=function(a){0<f&&c.push(a)};this.exit=function(){var a=c.length;if(0!=a&&0!=f){e.duration=
c[a-1].getTime()-f;l(e);for(var b=0;b<a;b++)m(c[b]);a=new Blob(g,{type:"application/octet-binary"});h();var k=URL.createObjectURL(a),a="";__svi18n&&__svi18n.info&&(a=__svi18n.info.recready);a||(a="Recorded file is ready. Please right click and save the link.");hi5.notifications.notify({msg:'<a href="'+k+'" target="_blank" download="'+q+'">'+a+"</a>",cbClose:function(){setTimeout(function(){(window.URL||window.webkitURL).revokeObjectURL(k)},999)}})}}};
RecordingObj=function(h,p,l,b){var m=(new Date).getTime();"undefined"==typeof b&&(b=48);this.strToInt=function(b){return parseInt(b,16)};this.getLen=function(){return l};this.getTime=function(){return m};this.getType=function(){return b};this.getData=function(){return h}};
