<extend name="angular-base.html" />
<block name="momentjs">
    <!--此处为moment js文件-->
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/moment/moment.min.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/moment/moment-timezone.js"></script>
</block>
<block name="headcss">

    <!--tree start-->
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}angularTree/css/tree-control.css" />
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}angularTree/css/tree-control-attribute.css" />
    <link rel="stylesheet" href="{$Think.const.CSS_URL}my-tree-style.css" />
    <link rel="stylesheet" href="{$Think.const.CSS_URL}my-comments.css" />
    <!--tree end-->
    <link rel="stylesheet" href="{$Think.const.PAGE_URL}css/crmProject/my_widget.css" />
    <link rel="stylesheet" href="{$Think.const.CSS_URL}my-gallery.css" />
    <link rel="stylesheet" href="{$Think.const.PAGE_URL}css/crmProject/my-project-info.css" />
    <!--color-picker-->
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}angular-bootstrap-colorpicker/3.0.32/css/colorpicker.min.css">
    <!--angular-datepicker-->
    <link rel="stylesheet" href="{$Think.const.BOOTSTRAP_URL}angular-datepicker/angular-datepicker.css" />
    <link rel="stylesheet" href="{$Think.const.CSS_URL}upload.css" />
    <style>
        div[uib-datepicker-popup-wrap]{
            display:inline-block;
        }
        treecontrol.tree-light li .tree-selected {
            font-weight: 400!important;
        }
        .ace-spinner {
            display: inline-block;
        }

        .middle {
            vertical-align: middle;
        }
        .ace-spinner .spinbox-buttons.btn-group-vertical > .btn:first-child {
            margin-top: 0;
        }

        .ace-spinner .spinbox-buttons.btn-group-vertical > .btn {
            font-size: 10px;
            padding: 0;
            width: 22px;
            height: 16px;
            line-height: 8px;
            margin-left: 0;
        }
        .percentage .ui-select-container {
            width: 50px;
        }
        .modal-lg{
            width:90% !important;
        }
    </style>
</block>
<block name="headjs">
    <script>
        //当前登录的用户下能访问的客户信息
        var _userrefcus = "{$cusRefuser}";
        //已经过滤好的客户信息
        var _customerinfoRefauth = "{$customerinfoRefauth}";
    </script>
   
    <script src="{$Think.const.BOOTSTRAP_URL}angularTree/js/angular-tree-control.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-sanitize/{$Think.const.ANGULAR_VERSION}angular-sanitize.min.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-file-upload/angular-file-upload.min.js"></script>
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}angular-bootstrap-colorpicker/3.0.32/js/bootstrap-colorpicker-module.js"></script> 
</block>
<block name="pageContent">
    <!--页头-->
    <div class="page-header clearfix">
        <h1 class="col-xs-3 text-left">
            {$MenuName}
            <small>
                <i class="ace-icon fa fa-angle-double-right"></i>
                {$PageName}
            </small>
        </h1>
        <div class="col-xs-4 text-center">
            <page-btn></page-btn>
        </div>
        
    </div>
    <!--快速检索-->
    <div class="table-header clearfix">
        <div class="col-xs-6">{$MenuName}<small><i class="ace-icon fa fa-angle-double-right"></i>{$PageName}</small></div>
    </div>
    <div class="col-md-12">
        <div widget-box="" class="widget-box transparent " wb-reloading="is_activity_reloading">
            <div class="widget-header widget-header-small">
                <h4 class="widget-title blue smaller"><i class="ace-icon fa fa-rss orange"></i>
                 项目信息列表(<span ng-init="projectDataCount={count:0}" ng-bind="projectDataCount.count"> </span>)
                </h4>
                <div class="widget-toolbar action-buttons">
                    快速检索：<input type="text" ng-model="filtername" />
                </div>
            </div>

            <div class="widget-body">
                <div class="widget-main padding-8">
                    <div ace-scroll options="activityScroll">
                        <div  class="profile-feed">
                            <div ng-repeat="item in service.projectArrData | orderBy:item.idproject:'desc' | filterByAttr:filtername:projectDataCount" class="profile-activity clearfix">
                                <div>
                                    <img class="pull-left" ng-if="item.name" alt="{{item.name}}" ng-src="../../../DPMS/public/lib/win10-ui/img/icon/diary.png" />
                                    <i ng-if="item.icon" class="pull-left thumbicon {{item.icon}} no-hover"></i>
                                    <a class="user" href="" ng-click="selectdetailed(item)" ng-bind="item.name"></a>
                                    <div>
                                        <!--项目创建者-->
                                        <span class="label c-info" ng-bind="service.usersData[item.userid].description?service.usersData[item.userid].description:service.usersData[item.userid].username"></span>
                                        <!-- 项目状态标签 -->
                                        <span ng-repeat="id in (item.statusid?item.statusid.split(','):[]) track by $index">
                                            <span class="label" ng-bind="service.projectstatusData[id].name" ng-style="{'background-color':(service.projectstatusData[id].labelclass != '')?service.projectstatusData[id].labelclass:'#ccc'}"></span>
                                        </span>
                                        <!-- 关联的客户标签 -->
                                        <span ng-repeat="id in (item.refcustomers.split(',')) track by $index">
                                            <span class="label" ng-bind="service.customerinfoData[id].name" ng-style="{'background-color':'#563cbf'}"></span>
                                        </span>
                                        <!-- 产品列表价总计标签 -->
                                        <!--<span class="label" ng-bind="(item.refproductlist&&item.refproductlist!=0)?('￥'+item.refproductlist):''" ng-style="{'background-color':'#5661c9'}"></span>-->
                                    </div>
                                    <div class="time"><i class="ace-icon fa fa-clock-o bigger-110"></i> <span ng-bind="formatDate(item.createtime)"></span></div>
                                </div>
                                <div class="tools action-buttons">
                                    <a href="" ng-show="(service.userid==item.userid)&&service.refedit" ng-click="updateInfo(item)" class="blue"><i class="ace-icon fa fa-pencil bigger-125"></i></a>
                                    <a href="" ng-show="(service.userid==item.userid)&&service.refdel" ng-click="remove(item)" class="red"><i class="ace-icon fa fa-times bigger-125"></i></a>
                                    <a href="" ng-click="selectdetailed(item)" class="pink"><i class="ace-icon fa fa-search bigger-125"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</block>

<block name="scriptTemplate">

</block>

<block name="footjs">
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/tools/datePicker.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/tools/datePickerUtils.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/tools/dateRange.js"></script>
    <script src="{$Think.const.BOOTSTRAP_URL}angular-datepicker/tools/input.js"></script>
    <!-- 配置文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="{$Think.const.BOOTSTRAP_URL}ueditor/1.4.3.3/ueditor.all.js"></script> 
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Project/index-angular.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Project/detailmodal.js"></script>   
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Project/modal.js"></script> 
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Project/productlist.js"></script>  
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Projectstatus/modal.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmuser/Users/modal.js"></script>   
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmuser/Usertype/modal.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmuser/Usergroup/modal.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmcustomerinfo/Contact/modal.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmcustomerinfo/Customerinfo/modal.js"></script>
    <script type="text/javascript" src="{$Think.const.JS_URL}directive.pagebtn.js"></script>
    <script type="text/javascript" src="{$Think.const.PAGE_URL}js/Crmproject/Project/uploadBtn.js"></script>
</block>
